<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <title>音乐/歌单播放【在线音乐推荐系统】</title>
    {% include '../common/css.html' %}
    <link rel="stylesheet" href="{% static 'css/smusic.css' %}"/>
</head>
<body class="sticky-header left-side-collapsed" style="">
	<section>
		<div class="main-content" style="margin-left:0px;padding-top:0px">
			{% include '../common/header.html' %}
			<div id="page-wrapper">
				<div class="inner-content" align="center">
					<div class="music-left" style="float:none;">
						<div class="albums">
							<div class="tittle-head">
								<h3 class="tittle">
									<h3 class="tittle">
										<span class="new">PLAY</span>
										音乐/歌单播放
										{% if playlist %}{{ playlist.playlistname }}{% endif %}
									</h3>
								</h3>
								<div class="clearfix"></div>
							</div>
							<div class="col-md-3" style="width:100%;">
								<div class="grid-music-container f-usn"
                                     style="width:100%;margin-top:5px;height:auto;padding:0px"
                                     align="left">
                  		            <div class="m-music-list-wrap" style="height:auto">播放列表</div>
  		                            <br><br>
	                                <div class="m-music-play-wrap" style="padding-left: 200px">
	                                    <div class="u-cover" ></div>
                                        <div class="m-now-info" style="">
                                            <h1 class="u-music-title" >
                                                <strong>标题</strong><small>歌手</small>
                                            </h1>
                                            <div class="m-now-controls"">
                                                <div class="u-control u-process">
                                                    <span class="buffer-process"></span>
                                                    <span class="current-process"></span>
                                                </div>
                                                <div class="u-control u-time">00:00/00:00</div>
                                                <div class="u-control u-volume">
                                                    <div class="volume-process" data-volume="0.50">
                                                        <span class="volume-current"></span>
                                                        <span class="volume-bar"></span>
                                                        <span class="volume-event"></span>
                                                    </div>
                                                    <span class="volume-control"></span>
                                                </div>
                                            </div>
                                            <div class="m-play-controls">
                                                <span class="u-play-btn prev" title="上一曲"></span>
                                                <span class="u-play-btn ctrl-play play" title="暂停"></span>
                                                <span class="u-play-btn next" title="下一曲"></span>
                                                <span class="u-play-btn mode mode-list current" title="列表循环"></span>
                                                <span class="u-play-btn mode mode-random" title="随机播放"></span>
                                                <span class="u-play-btn mode mode-single" title="单曲循环"></span>
                                            </div>
                                        </div>
	                                </div>
                                    <div class="f-cb">&nbsp;</div>
                                    <div class="m-music-lyric-wrap" style="display:none">
                                        <div class="inner">
                                            <ul class="js-music-lyric-content">
                                                <li class="eof">暂无歌词...</li>
                                            </ul>
                                        </div>
                                    </div>
	                                <div class="clearfix"></div>
                                </div>
                                <br><br>
							</div>
						</div>
					</div>
				</div>
			</div><div class="clearfix"></div>
		</div>
		{% include '../common/footer.html' %}
	</section>
</body>
<script>var musicList = new Array(); </script>
{% for playlistrecord in playlistrecords %}
    <script>
        var musicTemp = {};
        musicTemp.musicid = "{{ playlistrecord.musicid.id }}";
        musicTemp.title = "{{ playlistrecord.musicid.musicname }}";
        musicTemp.singer = "{{ playlistrecord.musicid.singer }}";
        musicTemp.cover = "{{ playlistrecord.musicid.image.url }}";
        musicTemp.src = "{{ playlistrecord.musicid.url.url }}";
        musicTemp.type = "{{ playlistrecord.musicid.typeid.typename }}";
        musicList[musicList.length] = musicTemp;
    </script>
{% endfor %}
{% include '../common/js.html' %}
<script src="{% static 'js/smusic.js' %}"></script>
<script>
	var sMusic = null;
	function playMusic(){
		if(sMusic!=null){
			return;
		}
		sMusic = new SMusic({
	        musicList : musicList,
	        autoPlay  : true,  //是否自动播放
	        defaultMode : 1,   //默认播放模式，随机
	        callback   : function (obj) {  //返回当前播放歌曲信息
	            console.log(obj);
	            //提交播放记录
	        	if(isLoginGlobal){
	        		common_ajax_self_result("/playrecord/save",
	        				"musicid="+obj.musicid+"&csrfmiddlewaretoken={{ csrf_token }}",null);
	        	}
	        }
	    });
		//sMusic.play();
	}
	$(document).ready(function(){
		playMusic();
	});
</script>
</html>